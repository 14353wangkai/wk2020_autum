## jvm内存模型

- 方法区：存储整个class文件的信息

  - 类加载器子系统将会提取 class文件里面的类信息，并将其存放在方法区中。

  - 例如类的名称、类的类型（枚举、类、接口）、字段、方法等等。

  - 运行时常量池：存放编译期间生成的**各种字面量和符号引用和符号引用翻译出来的直接引用**

    

- 堆（ Heap）：堆存在的对象，所有的线程共享

  - 而对于Java而言，每个应用都唯一对应一个JVM实例，而每一个JVM实例唯一对应一个堆，常见的堆中对象
    - new的对象实例
    - this指针
    - 数组

  - 堆由JVM的自动内存管理机制所管理，名为垃圾回收—— GC（garbage collection）。

- 栈（stack)：操作系统内核为某个进程或者者线程建立的存储区域
  - 它保存着一个线程中的方法的调用状态，它具备先进后出的特性。
  - 在栈中的**数据大小与生命周期严格来说都是确定的**，例如在一个**函数中的int变量**（注意，class中的int对象则是存在堆中）便是存储在 stack中，它的大小是固定的，在函数退出后它的生命周期也从此结束。
  - 在栈中，每一个方法对应一个栈帧，JVM会对Java栈执行两种操作：压栈和出栈。这两种操作在执行时都是以栈帧为单位的。
  - 栈中信息
    - 局部变量表：编译期间就可以直到的基础数据类型，对象的引用，returnAddress类型
    - 操作数栈，动态链接，方法出口等
  - 还有少量即时编译器编译后的代码等数据。 

- 本地方法栈
  
  - 和虚拟机栈一样，主要是运行native方法的