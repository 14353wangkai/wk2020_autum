## 、石林

- 运营组



## 服务化

- soa

![image-20200619103448640](/Users/wangkai/Library/Application Support/typora-user-images/image-20200619103448640.png)

- 服务化的问题
  - 服务多，关系复杂
- 缓解服务化问题
  - 服务治理
    - 服务注册与发现
    - 服务分组
    - 流量控制统计，权限控制
    - 可监控
- 公司OCTO工具
  - 服务治理设施
  - 实现服务之策，服务自动发现，负载均衡配置
  - 容错，灰度发布，数据可视化，监控警告，动态配置

- OCTO 1.0
  - 强依赖于zk
  - 以sdk的方式集成到
- 2.0
  - sg_agent
    - 服务代理
    - 部署在服务节点。通过与服务注册中心通信实现通信与承担服务的注册和发现
  - Mns：提供命名服务，注册中心，注册信息等存储，提供服务状态检测扫描
  - msgp：服务治理平台
- client端
  - 1.x 加载服务器列表
  - 2.4 记录调用信息
  - 3.x 查看服务器的增减，发生变动的时候，要将变动的那一方加入路由



- 自动注册的发现，在流量陡增的情况下，能够自动抓取
- 动态配置
  - rd给msgp修改配置
  - 配置服务端落地，有zookeeper，tair
  - 配置下发回msgp
- 服务详情框架：红色为重要

![image-20200619105613934](/Users/wangkai/Library/Application Support/typora-user-images/image-20200619105613934.png)

- 服务概要可以看到**服务标识**等有用信息
- 监控信息：可以通过以下信息找到高峰期流量
  - TP9x：9x%以上的请求在规定时间内完成
  - qps：query per second
  - 等

- 过滤器列表与告警条件可以看到被排除请求
- 异常报警

- 自动摘除故障节点（TP99暴增，qps骤降），可以将所有故障节点在rd不介入时候排除
- 平滑发布（双降）



## CAT central app tracking

- 为美团点评业务提供系统丰富的性能指标，健康状况和实时警告

## 四个报表

- transaction：一段代码运行的时间和次数？
- event：一段代码执行的次数
- problem：系统的异常，访问慢等问题
- heartbeat：jvm状态信息，如内存，线程

## 线上线下的octo

- octo.test
- Onto.sankuai