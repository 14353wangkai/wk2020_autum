## 安全点是如何设置的

- 所有非counted loop循环，如无界循环，回跳之前放置一个safe point，**为了防止发生GC需要STW的时候，线程不能暂停**，意思就是防止死循环导致无法GC
- 编译器在生成机器码的时候回未每个safepoint生成一些调试符号信息，为GC生成的符号信息是OopMap，指出栈和寄存器里哪里有GC管理的指针

## 线程是如何被挂起的



## 泛型擦除是如何进行类型检测的

- java在泛型擦除之前先进行类型检查
- 在泛型擦除之后，调用该泛型方法的函数将会做一个强制转换



## retention

- 生命周期长度 SOURCE < CLASS < RUNTIME ，前者能作用的地方后者一定也能作用。
- 如果需要在运行时去动态获取注解信息，那只能用 RUNTIME 注解；
- 如果要在编译时进行一些预处理操作，比如生成一些辅助代码（如 ButterKnife），就用 CLASS注解；
- 如果只是做一些检查性的操作，比如 @Override 和 @SuppressWarnings，则可选用 SOURCE 注解。

